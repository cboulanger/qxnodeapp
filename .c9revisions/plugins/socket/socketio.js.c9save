{"ts":1343663873149,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"// This plugin gives provides a socket.io server for the application\n\n// options:\n//   options.namespace is the namespace in which to accept messages.\n//   options.loglevel \n\nmodule.exports = function setup(options, imports, register) \n{    \n    // dependencies\n    var socketio = require(\"socket.io\");\n    var assert   = require(\"assert\");\n    \n    // options/parameters\n    var namespace = options.namespace;\n    assert(namespace && typeof namespace==\"string\", \"You must provide a namespace for the socket.io channels\");\n    var loglevel  = options.loglevel || 0;\n    \n    // attach socket.io server to http server \n    var io = socketio.listen(imports.http.server);\n    io.set('log level', loglevel);\n    \n    console.log(\"socket.io server attached, namespace '%s', loglevel %s\", namespace, loglevel);\n    \n    // this will be removed later, serves simply to see if everything works\n    io.of(namespace).on('connection',function(socket){\n        console.log('A new socket connected!');\n        socket.emit(\"buttonlabel\", \"Press this button\");\n        socket.on(\"buttonpressed\",function(data,fn){\n          console.log(\"Message from client: \" + data);\n          fn(\"Hello from the server!\");\n        });\n    });\n    \n    register(null,{\n        // API\n        socket : io\n    });\n}"]],"start1":0,"start2":0,"length1":0,"length2":1283}]],"length":1283}
